#set( $addressesActive = 'active' )
#set( $navTitle = 'Addresses' )
#set( $crumb = 'Addresses' )
#parse( "templates/header.vm" )
    <div class="row">
        <div class="col-12">

            <ul class="nav nav-fill nav-pills mb-3" id="pills-tab" role="tablist">
                <li class="nav-item mr-1">
                    <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">My Addresses</a>
                </li>
                <li class="nav-item mr-1">
                    <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Address Book</a>
                </li>
                <li class="nav-item mr-1">
                    <a class="nav-link" id="pills-help-tab" data-toggle="pill" href="#pills-help" role="tab" aria-controls="pills-help" aria-selected="false">Help <i class="far fa-question-circle"></i></a>
                </li>
            </ul>

            <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                    <div class="table-responsive">
                        <table id="accounts" class="table-sm table-striped table-bordered">
                            <thead>
                                <tr>
                                    <th>Account</th>
                                    <th>Address</th>
                                    <th>Balance</th>
                                    <th>Action</th>
                                </tr>
                            </thead>

                            <tbody>
                                #if ( ! $addrs.empty )
                                    #foreach( $addr in $addrs )
                                        #if ( ! $addr.watchOnly )
                                            <tr>
                                                #if ( $addr.label != "" )
                                                    <td>$addr.label</td>
                                                #else
                                                    <td><input class="form-control form-control-sm" name="label" id="addr-label-$addr.address" type="text" value="$envLabel"></td>
                                                #end

                                                <td>
                                                    <a class="copy-address" href="/portal/files?addr=$addr.address">$addr.address</a>
                                                    <i class="far fa-copy"></i>
                                                </td>
                                                <td>$addr.balance</td>
                                                <td>
                                                    #if ( $addr.label != "" )
                                                        #if ( ! $addr.registered && ! $addr.watchOnly && $addr.balance > 0 )
                                                            <button onclick="window.location.href='/portal/regaddr?addr=$addr.address';" id="assign-btn" type="button" class="btn btn-outline-primary btn-sm">register</button>
                                                        #end
                                                    #else
                                                        <button id="assign-btn" data-address="$addr.address" type="button" class="assign-btn btn btn-outline-primary btn-sm">assign</button>
                                                    #end
                                                </td>
                                                <form id="form-assign-label-$addr.address" action="/portal/assign">
                                                    <input name="addr"  type="hidden" id="assign-addr-$addr.address"  value="$addr.address">
                                                    <input name="label" type="hidden" id="assign-label-$addr.address" value="">
                                                </form>
                                            </tr>
                                        #end
                                    #end
                                #end
                            </tbody>
                        </table>
                        <div class="form-group row mt-3">
                            <div class="col-12">
                                <form id="add-address" action="/portal/newaddr" class="row">
                                    <div class="col-md-4 col-sm-12 pb-3">
                                        <input name="label" class="form-control form-control-sm" type="text" placeholder="New Address Name" value="" id="new-address-name">
                                    </div>
                                    <div class="col-md-3 col-sm-12">
                                        <button type="submit" class="btn btn-outline-primary btn-sm">Generate New Address</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                    <div class="table-responsive">
                        <table id="accounts" class="table-sm table-striped table-bordered">
                            <thead>
                                <tr>
                                    <th>Account</th>
                                    <th>Address</th>
                                </tr>
                            </thead>

                            <tbody>
                                #if ( ! $addrs.empty )
                                    #foreach( $addr in $addrs )
                                        #if ( $addr.watchOnly )
                                            <tr>
                                                #if ( $addr.label != "" )
                                                    <td>$addr.label</td>
                                                #else
                                                    <td><input class="form-control form-control-sm" name="label" id="addr-label-$addr.address" type="text" value="$envLabel"></td>
                                                #end
                                                <td>$addr.address</td>
                                            </tr>
                                        #end
                                    #end
                                #end
                            </tbody>
                        </table>

                        <div class="form-group row mt-3">
                            <div class="col-12">
                                <form id="import-address" action="/portal/impkey" class="row">
                                    <div class="col-md-2 col-sm-12 pb-3">
                                        <input name="label" class="form-control form-control-sm" type="text" placeholder="Label" value="" id="import-label">
                                    </div>
                                    <div class="col-md-2 col-sm-12 pb-3">
                                        <input name="impkey" class="form-control form-control-sm" type="text" placeholder="Key To Import" value="" id="import-key">
                                    </div>
                                    <div class="col-md-2 col-sm-12">
                                        <button type="submit" class="btn btn-outline-primary btn-sm">Import Key</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- HELP TAB -->
                <div class="tab-pane fade" id="pills-help" role="tabpanel" aria-labelledby="pills-help-tab">
                    <div class="row">
                        <div class="col-sm-10 offset-1">
                            <p>The first steps for both of you to take to share anything with another member on the Aegeus platform is:</p>
                            <ol>
                                <li>Click "Generate New Address" to generate a new address to use for your share and give it a name for your own reference.</li>
                                <li>Send it some AEG (a small amount will do, even a few AEG).</li>
                                <li>Click "assign" and then "register".</li>
                                <li>Share the new AEG address with the Aegeus member you intend to securely share with.</li>
                            </ol>

                            <p>Next what you will both do is:</p>
                            <ol>
                                <li>Click "Addresses" on the menu to the left.</li>
                                <li>Paste the address you gave them into the input box labeled "Key To Import", give it a Label, and click "Import Key".</li>
                            </ol>

                            <p>Next what you will do:</p>
                            <ol>
                                <li>Click "Files" on the menu to your left.</li>
                                <li>Click the address you've just created to access the file management area.</li>
                                <li>If you want to share a text file by URL, click "Add by URL".  If you want to add content yourself manually, click "Create Document".</li>
                            </ol>

                            <p>If adding manually through "Create Document", take the following steps:</p>
                            <ol>
                                <li>Set the "Content Path" or the name you would like to give this content.</li>
                                <li>Type your content in the box and click "Add Content".</li>
                                <li>Click "IPFS Files" and find the name of the data you just added and click "send".</li>
                                <li>Choose the person you wish to send to from the drop down box and click "send".</li>
                            </ol>

                            <hr>

                            <p>Now to get the files that were sent to you, take the following steps:</p>
                            <ol>
                                <li>Click "Files" on the menu, and then choose the address from the list you'd like to view files for.</li>
                                <li>Click "IPFS Files".</li>
                                <li>Click "get".</li>
                                <li>Click "Local Files".</li>
                                <li>Click "show" next to the file you wish to view.</li>
                            </ol>
                        </div>
                    </div>
                </div>
                <!-- END HELP TAB -->

            </div>
        </div>
    </div>

#set( $customJS = '<script src="/js/addresses.js"></script>' )
#parse( "templates/footer.vm" )
